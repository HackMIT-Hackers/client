import { MantineProvider, AppShell } from "@mantine/core";
import { theme } from "./theme";
import { ToolSidebar } from "./components/ToolSidebar";
import { useImageStore } from "./hooks/useImageStore";
import { PhotoEditDisplay } from "./components/PhotoEditDisplay";
import { useEffect } from "react";

const VIN_DIESEL_URI = "data:image/jpeg;base64,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";

export default function App() {
  const [image, updateImage] = useImageStore(store => [store.image, store.updateImage]);

  // TODO(kosinw): Remove this hard coding of loading an image
  useEffect(() => {
    const loadImage = async () => {
      const image = await fetch(VIN_DIESEL_URI);
      const blob = await image.blob();

      console.log(blob);

      updateImage(
        new File([blob], "vin-diesel.jpg")
      );
    };

    loadImage().catch(console.error);
  }, []);

  return (
    <MantineProvider theme={theme} withGlobalStyles withNormalizeCSS>
      <AppShell
        // padding="md"
        padding="xs"
        navbar={<ToolSidebar />}
        styles={(theme) => ({
          main: { backgroundColor: theme.colorScheme === 'dark' ? theme.colors.dark[8] : theme.colors.gray[0] },
        })}
      >
        {image !== null ? (
          <PhotoEditDisplay file={image} />
        ) : (
          "loading..."
        )}
      </AppShell>
    </MantineProvider>
  );
}
